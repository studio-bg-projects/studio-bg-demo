const fs = require('node:fs');

function parseMdString(mdString) {
  const lines = mdString.split('\n').filter(line => line.trim() !== ''); // Разделяме редовете и махаме празните
  const result = { categories: [] };

  let currentCategory = null;
  let currentSubCategory = null;

  lines.forEach(line => {
    if (line.startsWith('# ')) {
      // Нова категория
      currentCategory = { name: line.replace('# ', '').trim(), subCategories: [] };
      result.categories.push(currentCategory);
    } else if (line.startsWith('## ')) {
      // Нова подкатегория
      currentSubCategory = { name: line.replace('## ', '').trim(), items: [] };
      if (currentCategory) {
        currentCategory.subCategories.push(currentSubCategory);
      }
    } else if (line.startsWith('- ')) {
      // Айтъми в подкатегория
      const item = line.replace('- ', '').trim();
      if (currentSubCategory) {
        currentSubCategory.items.push(item);
      }
    }
  });

  return result;
}

const mdString = `
# Аудио и видео
## Монитори
- Размер на екрана, inch
- Технология
- Тип на матрицата
- Сензорен дисплей
- Резолюция
- Време за реакция, ms
- Честота на опресняване, Hz
- Яркост, cd/m2
- Динамичен контраст
- Web камера, MP
- Вградени говорители
- Портове
- VESA размер, mm
- Цвят
## Телевизори
- Размер на екрана, inch
- Технология
- Резолюция
- Smart функция
- Динамичен контраст
- Честота, Hz
- Мрежа
- Изводи за свързване
- VESA размер, mm
- Размер
- Цвят
## Мултимедийни проектори
- Технология
- Яркост, lumens
- Контраст
- Разд. способност
- Поддържане на формати
- Звук
- Коефициент на увеличение
- Късофокусен
- Опция за безжично прожектиране
- Входове
- Изходи
- Лампа живот, h
- Цвят
## Екрани
- Диагонал, inch
- Размери на екрана (Ш, В), cm
- Формат
## Аудио системи
- Брой канали
- Изх. мощност, W
- Субуфер, тип
- Интерфейс
- Bluetooth
- HDMI
- Звукови режими
- Караоке
- Високоговорители, тип
- FM радио
- Дистанционно управление
- Цвят
## Слушалки
- Предназначен за
- Тип
- Тип на свързване
- Конектор
- Микрофон
- Шумопотискане
- Контрол на звука
- Честотен обхват, Hz
- Чувствителност, dB
- Импеданс, Ohm
- Дължина на кабела, m
- Цвят
## Тонколони
- Високоговорител, тип
- Брой високоговорители
- Контрол на звука
- Микрофон
- Интерфейс
- Bluetooth
- Честотен обхват, Hz
- Изх. мощност, W
- Захранване, тип
- Водоустойчивост
- Размери, mm
- Цвят
## Безжични презентери
- Съвместимост
- Описание
- Функции
- Интерфейс
- Обхват
- Бутони
- Индикатори
- Батерии
- Цвят
## Дисплеи & OPS
- Размер на дисплея, инч
- Резолюция
- Тип на матрицата
- Тъч, точки на докосване
- Време за реакция, ms
- Честота на опресняване, Hz
- Ъгъл на видимост H/ V
- Яркост, cd/m2
- Контраст
- Безжична свързаност
- Входове
- Изходи
- OPS слот
- Вградени говорители
- Операционна система
- VESA размер, mm
## Фотоапарати & видеокамери
- Ефективни пиксели, MP
- Сензор, тип
- Процесор, тип
- Обектив, фокусно разстояние
- Оптично увеличение
- AF система/точки
- ISO светлочувствителност
- Дисплей, inch
- Светкавица, режими
- Скорост на затвора, s
- Режими на снимане
- Видео
- Файлови формати
- Интерфейс
- GPS позициониране
- Безжична мрежа
- Батерия, тип
## Видеоконферентни системи
- Резолюция
- Размер на екрана, inch
- Видео стандарти
- Видео вход
- Видео изход
- Аудио стандарти
- Аудио вход
- Аудио изход
- Камера
- Протоколи
- Мултисайт
- Мрежови интерфейси
- Други интерфейси
- Консумация, W
## Камери за видеонаблюдение
- Сензор, тип
- Резолюция, MP
- Фокално разстояние
- Минимална осветеност, lx
- IR осветление
- Максимална резолюция, pixels
- Входни/Изходни портове
- Звук
- Захранване
- Слот за карти
- Нощно виждане
- Външен монтаж
- Влагозащита
# Гейминг
## Гейминг слушалки и колонки
- Тип на свързване
- Микрофон
- Шумопотискане
- Контрол на звука
- Честотен обхват, Hz
- Чувствителност, dB
- Импеданс, Ohm
- Дължина на кабела, m
- Цвят
## Гейминг монитори
- Размер на екрана, inch
- Технология
- Тип на матрицата
- Сензорен дисплей
- Резолюция
- Време за реакция, ms
- Честота на опресняване, Hz
- Яркост, cd/m2
- Динамичен контраст
- Web камера, MP
- Вградени говорители
- Портове
- Размери с поставка
- Цвят
- VESA размер, mm
## Гейминг мишки и клавиатури
- Тип на свързване
- Интерфейс
- Резолюция, dpi
- Сензор, тип
- Брой бутони
- Програмируеми бутони
- Подсветка
- Размери (Ш, Д, В), mm
- Цвят
## Гейминг настолни компютри
- Софтуер
- Процесор
- Чипсет
- Памет, GB
- Памет, слотове
- Твърд диск, тип
- Твърд диск, GB
- Видео карта, GB
- Размери (Ш, Д, В), cm
- Цвят
## Гейминг преносими компютри
- Софтуер
- Процесор
- Чипсет
- Памет, GB
- Памет, слотове
- Твърд диск, тип
- Твърд диск, GB
- Дисплей, inch
- Дисплей, резолюция
- Честота на опресняване, Hz
- Видео карта, GB
- Докинг конектор
- Четец за карти
- Четец на пръстов отпечатък
- Web камера, MP
- Клавиатура, тип
- Кирилизация
- Батерия, cell
- Цвят
## Волани
- Тип на свързване
- Вибрации
- Бутони
- Ъгъл на въртене, градуси
- Автоматично центриране
- Включени педали
- Цвят
# Компютри и лаптопи
## Лаптопи
- Софтуер
- Процесор
- Чипсет
- Памет, GB
- Памет, слотове
- Твърд диск, тип
- Твърд диск, GB
- Дисплей, inch
- Дисплей, резолюция
- Честота на опресняване, Hz
- Видео карта, GB
- Звук
- Мрежа
- Докинг конектор
- Четец за карти
- Четец на пръстов отпечатък
- Web камера, MP
- Клавиатура, тип
- Кирилизация
## Настолни компютри
- Софтуер
- Процесор
- Чипсет
- Памет, GB
- Памет, слотове
- Твърд диск, тип
- Твърд диск, GB
- Видео карта, GB
- Звук
- Мрежа
- Размери (Ш, Д, В), cm
- Цвят
## Работни станции
- Софтуер
- Процесор
- Чипсет
- Памет, GB
- Памет, слотове
- Твърд диск, тип
- Твърд диск, GB
- Видео карта, GB
- Звук
- Мрежа
- Размери (Ш, Д, В), cm
- Цвят
## Аксесоари и опции
- Поддържани карти за памет
- USB-C
- RJ-45
- Видео интерфейс
- Докинг интерфейс
- Дължина на кабела, cm
- Захранване
- Размери (Ш, Д, В), mm
- Наклон
- Въртене
# Телефони и таблети
## Смартфони
- Операционна система
- Брой SIM карти
- Процесор
- Мрежа
- Дисплей, inch
- Резолюция
- Сензорен дисплей
- Памет, GB
- Дисково пространство, GB
- Слот за карти
- Камера, MP, предна
- Камера, MP, задна
- Батерия, mAh
- Размери (Ш, Д, В), mm
- Цвят
## Таблети
- Операционна система
- Брой SIM карти
- Процесор
- Мрежа
- Дисплей, inch
- Резолюция
- Сензорен дисплей
- Памет, GB
- Дисково пространство, GB
- Слот за карти
- Камера, MP, предна
- Камера, MP, задна
- Батерия, mAh
- Размери (Ш, Д, В), mm
- Цвят
## Графични таблети
- Операционна система
- Технология
- Резолюция, lpi
- Активна площ (Ш, Д), mm
- Нива на натиск
- Писалка
- Брой експресни клавиши
- Интерфейс
- Батерия
- Цвят
- Размери (Ш, Д, В), mm
## Четци за е-книги
- Операционна система
- Технология
- Резолюция, lpi
- Активна площ (Ш, Д), mm
- Нива на натиск
- Писалка
- Брой експресни клавиши
- Интерфейс
- Батерия
- Цвят
- Размери (Ш, Д, В), mm
# Прнтери и скенери
## Лазерни принтери и МФП
- Натоварване, стр./месец
- Скорост черно
- Скорост цветно
- Резолюция черно
- Резолюция цветно
- Медия, тип
- Медия, размер
- Медия, g/m2
- Капацитет за хартия - Входяща тава
- Капацитет за хартия - Изходяща тава
- Двустранен печат
- Памет, MB
- Интерфейс
- Мрежа
- Дисплей
- Консумативи
- Размери (Ш, Д, В), mm
- Цвят
- Тегло, g
## Мастиленоструйни принтери и МФП
- Натоварване, стр./месец
- Скорост черно
- Скорост цветно
- Резолюция черно
- Резолюция цветно
- Медия, тип
- Медия, размер
- Медия, g/m2
- Капацитет за хартия - Входяща тава
- Капацитет за хартия - Изходяща тава
- Двустранен печат
- Памет, MB
- Интерфейс
- Мрежа
- Дисплей
- Консумативи
- Размери (Ш, Д, В), mm
- Цвят
- Тегло, g
## Матрични принтери
- Натоварване, стр./месец
- Брой игли
- Брой колони
- Скорост
- Резолюция при печат, dpi
- Буферна памет
- Интерфейс
- Брой копия
- Емулация
- Консумативи
- Размери (Ш, Д, В), mm
- Цвят
- Тегло, g
## Мобилни принтери
- Натоварване, стр./месец
- Скорост черно
- Скорост цветно
- Резолюция черно
- Резолюция цветно
- Медия, тип
- Медия, размер
- Медия, g/m2
- Капацитет за хартия - Входяща тава
- Батерия, тип
- Двустранен печат
- Памет, MB
- Интерфейс
- Мрежа
- Дисплей
- Консумативи
- Размери (Ш, Д, В), mm
- Цвят
- Тегло, g
## Етикетни принтери
- Технология на печат
- Принтер резолюция, dpi
- Мах. скорост на печат, мм/сек
- Мах. ширина на етикета, mm
- Мах. ширина на печата, mm
- Мах. дължина на етикета, m
- Автоматичен нож
- Интерфейс
- Размери (Ш, Д, В), mm
- Цвят
- Тегло, g
## POS принтери
- Технология на печат
- Резолюция при печат, dpi
- Мах. скорост на печат, мм/сек
- Поле за печат, max
- Размер на символите, mm
- Видове шрифт
- Медия, тип
- Медия, размер
- Автоматичен нож
- Интерфейс
- Сензори
- Буферна памет
- Mонтаж
- Захранване, тип
- Размери (Ш, Д, В), mm
- Тегло, g
## Плотери
- Модел, размер /mm/
- Медия, формат
- Разд. способност
- Скорост, sec
- Технология на печат
- Мастило, тип
- Брой печатащи касети
- Размер на капката
- Минимална дебелина на линията
- Точност на линията
- Интерфейс
- Памет, GB
- Твърд диск, GB
- Дължина на разпечатките (ролка), m
- Ширина на разпечатките (ролка), mm
- Медия, тип
- Медия, g/m2
- Медия, дебелина
- Медия, подаване
- Рязане на хартията
- Консумативи
- Размери (Ш, Д, В), mm
- Тегло, g
## Режещи плотери
- Медия, дебелина
- Медия, тип
- Максимална площ на рязане
- Сила на рязане
- Рязане по маркери
- Рязане без подложка
- Допълнителни функции
- Дисплей
- Интерфейс
- Съвместим с AutoBlade
- Размери (Ш, Д, В), cm
- Тегло, g
## Копирни машини
- Натоварване, стр./месец
- Принтер скорост, ppm
- Принтер резолюция, dpi
- Двустранен печат
- Копир скорост, cpm
- Копир резолюция, dpi
- Брой копия
- Мащабиране
- Скенер, тип
- Скенер резолюция, dpi
- Скенер скорост, ipm
- Медия, тип
- Медия, формат
- Медия, g/m2
- Капацитет за хартия - Входяща тава
- Капацитет за хартия - Изходяща тава
- ADF
- Памет, MB
- Твърд диск, GB
- Интерфейс
- Мрежа
- Дисплей
- Консумативи
- Размери (Ш, Д, В), mm
- Тегло, g
## Скенери
- Скенер, тип
- Медия, размер
- Скенер скорост черно, стр./мин
- Скенер скорост цветно, стр./мин
- Скенер резолюция
- Дълбочина на цвета при сканиране
- Листоподаващо устройство
- Двустранно сканиране
- Адаптер за негативи
- Мащабиране
- Файлови формати
- Интерфейс
- Мрежа
- Безжична мрежа
- OCR софтуер
- Цвят
- Размери (Ш, Д, В), mm
- Тегло, g
# Мрежови устройства
## IP телефони
- Дисплей, резолюция
- Брой линии
- Набиращ механизъм, тип
- Конферентни обаждания
- Високоговорител
- Идентификация на повикващия
- Задържане на повикването
- Възможност за гласова поща
- Пренасочване на разговори
- Прехвърляне на повиквания
- Power Over Ethernet (PoE)
- VoIP протоколи
- Мрежови протоколи
- Задаване на IP адрес
- QoS
- Безжична мрежа
- Възможност за свързване на слушалки
- Интегриран комутатор
- Брой мрежови портове
- Цвят
- Размери (Ш, Д, В), mm
- Тегло, kg
## KVM устройства
- Устройство, тип
- Бр. портове
- Отдалечено управление
- Размери, mm
- Тегло, kg
## Аксес-пойнти
- Скорост
- Антена
- Интерфейс
- Стандарти
- Сигурност
- Захранване
- Управление
- Размери, mm
- Тегло, g
## Видеоконферентни системи
- Резолюция
- Размер на екрана, inch
- Видео стандарти
- Видео вход
- Видео изход
- Аудио стандарти
- Аудио вход
- Аудио изход
- Камера
- Протоколи
- Мултисайт
- Мрежови интерфейси
- Други интерфейси
- Консумация, W
- Размери (Ш, Д, В), cm
- Тегло, g
## Защитни стени
- Брой мрежови портове
- Мрежови портове
- Стандарти
- Други портове
- Слотове
- Пропусквателна способност на защитната стена, Mbps
- IPS Пропусквателна способност, Mbps
- VPN Пропусквателна способност, Mbps
- Максимален брой връзки
- Максимален брой AnyConnect или клиентски VPN сесии
- IPsec VPN Peers
- Virtual interfaces (VLANs)
- Power Over Ethernet (PoE)
- High Availability
- Размери (Ш, Д, В), cm
- Тегло, g
## Комутатори
- Суич, тип
- Общ брой портове
- Основни портове, тип
- Power Over Ethernet (PoE)
- Uplink портове
- Свободни (10GB) слотове
- Управление
- Stackable
- Fans
- Захранване
- Routing
- Памет (Flash, RAM)
- Капацитет за маршрутизиране/превключване, Gbps
- Пропускателна способност, Mpps
- MAC адреси
- VLAN (брой, стандарти)
- QoS
- L2 мрежови стандарти
- L3 мрежови стандарти
- IPv6 functionality
- Сигурност
- Опция за монтаж
- Размери (Ш, Д, В), mm
- Тегло, g
## Комуникационни шкафове
- Размер, inch
- Форм-фактор
- Широчина, mm
- Дълбочина, mm
- Височина, mm
- Вътрешни размери, mm
- Максимален товар, kg
- Тегло, kg
- Предни врати, тип
- Странични панели
- Заден панел
- Заключване
- Слот за вентилатори
- Цвят
- Размери (Ш, Д, В), mm
- Тегло, g
## Рутери
- Брой портове WAN (скорост)
- Брой портове LAN (скорост)
- Стандарти
- Скорост, Mbps
- Антена, тип
- Мобилна мрежа
- Портове USB
- Слот за карти
- Сигурност
- Защитна стена
- QoS
- Управление
- VPN (брой мрежи, стандарти)
- Размери, mm
- Тегло, g
## Мрежови адаптери
- Интерфейс
- Брой мрежови портове
- Максимална мрежова скорост, Gbit/s
- Поддържани мрежови скорости, Gbit/s
- Мрежови стандарти
# Enterprise продукти
## Сървъри
- Серия
- Процесор
- Памет, GB
- Памет, слотове
- Твърд диск, GB
- Дисков контролер
- Брой поддържани дискове
- Оптично устройство
- Мрежа
- Разширителен слот
- Интерфейс
- Порт за отдалечено управление
- Захранване
- Съвместими операционни системи
- Софтуер за управление
- Форм-фактор
- Тегло, kg
## Сториджи
- Сторидж, тип
- Серия
- SAS Interface
- FC Interface
- iSCSI Interface
- Твърд диск, брой
- Maximum Disk Drives
- Контролер
- Controller cache
- RAID
- Захранване
- Операционна система
- Поддържани операционни системи
- Форм-фактор
- Тегло, kg
## UPS
- Вх.напрежение, V
- Изх. мощност, VA
- Брой изводи
- Тип изводи
- Батерия, тип
- Защити
- Технология
- Стандарти
- Тегло, kg
# Офис оборудване
## Канцеларски материали
- Аксесоари за бюро
- Папки, джобове и класьори
- Несесери, раници и чанти
- Почистващи материали за техника
- Зарядни, кабели и разклонители
# Дребни уреди за дома
## Еър фрайър
- Капацитет
- Програми
- Функция пържене
- Функция печене
- Функция фрил
- Реголируем термостат
- Температура (мин)
- Температура (макс)
- Предварително зададени програми
- Брой гости
- Дехидратираща функция
## Пасатори
- Капацитет купа
- Функции
- Мощност
- Захранване
- Скорости
## Блендери
- Материал остриета
- Тип контролен панел
- Мощност
- Капацитет
## Кафемашини и кафеавтомати
- Мощност
- Налягане
- Капацитет на контейнера за зърна
- Вместимост Нн резервоар за вода
- Автоматична капучино система
## Лазарен епилатор
- Част от тялото
- Комплект
- Захранване
- Скорости
- Брой IPL импулси
- Мощност
## Електрически четки за зъби
- Тип движение
- Нива на интензитет
- Брой програми
- Брой включени приставки
- Bluetooth
- Осцилации / мин
- Автономия на акумулатора до
## Сешоар
- Скорости
- Нива температура
- Функции
- Включени аксесоари
- Покритие
- Мощност
- Захранване
- Дължина на кабела
## Преса
- Покритие
- Нива температура
- Функции
- Брой включени приставки
- Максимална температура
## Машинки за подстригване и тримери
- Използване за
- Захранване
- Нива на рязане
- Материал ножчета
- Функции
- Съдържание пакет
- Време за зареждане
- Автономия
## Електрически самобрасначки
- Тип самобрасначка
- Захранване
- Функции
- Тип батегия
- Бреме за зареждане
- Автономия на акомулатора до
## Уреди за гладене
- Функции
- Мощност
- Капаците на водния резервоар
- Материал на гладещата повърхност
- Парна струя
## Прахосмукачки
- Захранване
- Тип почистване
- Тип настилка
- Функции
- Мощност
- Автономия на акумолатора
- Капацитет
- Аксесоари
`;

const data = parseMdString(mdString);
const sqls = [];
const specs = {};
let specsId = 1;

sqls.push(`_DELETE FROM \`categories\` WHERE \`parentId\` IS NOT NULL;`);
sqls.push(`_DELETE FROM \`categories\`;`);
sqls.push(`_DELETE FROM \`specifications\`;`);
sqls.push(`_DELETE FROM \`categoriesSpecifications\`;`);

data.categories.forEach((category, cIdx) => {
  const categoryId = (cIdx + 1) * 1000;

  const sql = `
    _INSERT INTO \`categories\` (\`id\`, \`parentId\`, \`name\`, \`sortOrder\`, \`fileGroupId\`, \`isActive\`)
    VALUES (${categoryId}, NULL, '${category.name}', ${cIdx + 1}, SHA1(RAND()), 1);
  `;
  sqls.push(sql);

  category.subCategories.forEach((subCategory, scIdx) => {
    const subCategoryId = (scIdx + 1) + categoryId;

    const sql = `
      _INSERT INTO \`categories\` (\`id\`, \`parentId\`, \`name\`, \`sortOrder\`, \`fileGroupId\`, \`isActive\`)
      VALUES (${subCategoryId}, ${categoryId}, '${subCategory.name}', ${scIdx + 1}, SHA1(RAND()), 1);
    `;
    sqls.push(sql);

    subCategory.items.forEach((itemName, iIdx) => {
      if (!specs[itemName]) {
        specs[itemName] = specsId++;

        const sql = `
          _INSERT INTO \`specifications\` (\`id\`, \`name\`, \`valueType\`, \`isActive\`)
          VALUES (${specs[itemName]}, '${itemName}', 'string', 1);
       `;
        sqls.push(sql);
      }

      const sql = `
        _INSERT INTO \`categoriesSpecifications\` (\`categoryId\`, \`specificationId\`, \`sortOrder\`)
        VALUES (${subCategoryId}, ${specs[itemName]}, ${iIdx + 1});
      `;
      sqls.push(sql);
    });
  });
});

const sqlOutput = sqls.map(item => item.replace(/[_\n]/gi, '').trim()).join('\n');
console.log(sqlOutput);
fs.writeFileSync('ATTRIBUTES-TO-SQL.sql', sqlOutput);
